<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><title>Better Collection Iteration in Backbone.js</title><meta name=description content="This is a trivial problem, but I’ve seen this in many beginner tutorials, and I don’t like it. People are iterating over collection and creating Item views i..."><link rel=stylesheet href=../css/font.css media=none onload="if(media!='all')media='all'"><style>.highlight .gs,b,strong{font-weight:700}.posts .external,time{vertical-align:middle}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}a{background-color:transparent}a:active,a:hover{outline:0}h1{font-size:2em;margin:.67em 0}img{border:0;max-width:100%}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}.highlight{background-color:#002b36;color:#93a1a1}.highlight .c{color:#586e75}.highlight .err,.highlight .g{color:#93a1a1}.highlight .k{color:#859900}.highlight .l,.highlight .n{color:#93a1a1}.highlight .o{color:#859900}.highlight .x{color:#cb4b16}.highlight .p{color:#93a1a1}.highlight .cm{color:#586e75}.highlight .cp{color:#859900}.highlight .c1{color:#586e75}.highlight .cs{color:#859900}.highlight .gd{color:#2aa198}.highlight .ge{color:#93a1a1;font-style:italic}.highlight .gr{color:#dc322f}.highlight .gh{color:#cb4b16}.highlight .gi{color:#859900}.highlight .go,.highlight .gp,.highlight .gs{color:#93a1a1}.highlight .gu{color:#cb4b16}.highlight .gt{color:#93a1a1}.highlight .kc{color:#cb4b16}.highlight .kd{color:#268bd2}.highlight .kn,.highlight .kp{color:#859900}.highlight .kr{color:#268bd2}.highlight .kt{color:#dc322f}.highlight .ld{color:#93a1a1}.highlight .m,.highlight .s{color:#2aa198}.highlight .na{color:#93a1a1}.highlight .nb{color:#B58900}.highlight .nc{color:#268bd2}.highlight .no{color:#cb4b16}.highlight .nd{color:#268bd2}.highlight .ne,.highlight .ni{color:#cb4b16}.highlight .nf{color:#268bd2}.highlight .nl,.highlight .nn,.highlight .nx,.highlight .py{color:#93a1a1}.highlight .nt,.highlight .nv{color:#268bd2}.highlight .ow{color:#859900}.highlight .w{color:#93a1a1}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#2aa198}.highlight .sb{color:#586e75}.highlight .sc{color:#2aa198}.highlight .sd{color:#93a1a1}.highlight .s2{color:#2aa198}.highlight .se{color:#cb4b16}.highlight .sh{color:#93a1a1}.highlight .si,.highlight .sx{color:#2aa198}.highlight .sr{color:#dc322f}.highlight .s1,.highlight .ss{color:#2aa198}.highlight .bp,.highlight .vc,.highlight .vg,.highlight .vi{color:#268bd2}.highlight .il{color:#2aa198}body,html{box-sizing:border-box;font-family:'Droid Sans',Helvetica,Arial,sans-serif;line-height:1.5}*,:after,:before{box-sizing:inherit}time{color:#9a9a9a}a{color:#50abf1;text-decoration:none;-webkit-transition:.2s color;transition:.2s color}a:hover{border-bottom:1px dotted rgba(80,171,241,.5)}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}@keyframes fadein{from{opacity:0}to{opacity:1}}.content{-webkit-animation:fadein .2s;animation:fadein .2s}@media only screen and (min-width:768px){.content{padding:0 25px 0 360px}}.content .wrapper{width:90%;margin:0 auto;max-width:720px}.header{background:#202020;color:#fff;overflow:hidden}@media only screen and (min-width:768px){.content .wrapper{width:auto;margin:0}.header{min-width:260px;position:fixed;top:0;bottom:0;left:0}}.header nav .title,.posts .title{left:-99999px;position:absolute;top:-99999px}@media only screen and (min-width:990px){.content{padding-left:460px}.header{min-width:360px}}.header .wrapper{width:90%;margin:0 auto;padding:20px 0}.header .logo{font-family:Helvetica,Arial,sans-serif;font-weight:400;margin:0}.header .logo a{color:#fff;font-size:1.125rem;line-height:1.2}.header .logo a:hover{border:none}@media only screen and (min-width:990px){.header .logo{margin-bottom:1em}.header .logo a{font-size:2.25rem}}.header .description{color:rgba(255,255,255,.5);margin-top:0;margin-bottom:1em}@media only screen and (min-width:768px){.header .wrapper{width:80%;position:absolute;left:10%;bottom:25px;padding:0}.header .description{font-size:.875rem}}@media only screen and (min-width:990px){.header .description{font-size:1.125rem}}.post h3,.posts h3{font-size:1.625rem}.header nav ul{margin:0;padding:0;list-style:none}.header nav a{color:#fff;display:inline-block;border-bottom:1px solid transparent}.header nav a:hover{border-bottom:1px dotted rgba(255,255,255,.2)}.header nav li{display:inline-block;margin-bottom:5px;margin-right:5px}.header nav li:before{content:"\2022";display:inline-block;margin-right:7px}.header nav li:first-child:before{display:none}@media only screen and (min-width:768px){.header nav li{display:block;margin-right:0}.header nav li:before{display:none}}.posts{padding-top:50px}.posts article{margin-bottom:2.5em}.posts h3{font-weight:400;margin-bottom:.2em}.posts a{color:#303030}.posts a:hover{color:#50abf1;border:none}.posts .external{margin-left:10px;color:#50abf1}.posts .external:before{margin-right:10px;content:'\2022'}.post h3,.post h4,.post h5,.post h6{font-weight:400;color:#ff7d49}.post h4{font-size:1.125rem}.post .post-content{margin-top:2em;font-size:1.0625rem;line-height:1.6}.post blockquote{margin:2em 0;padding:.3em 2em;border-left:5px solid #f4f4f4;font-style:italic;color:#ccc}.post p>code{font-size:.9em;color:#999;background:#eee;padding:5px}.post .highlight{padding:10px;line-height:1.7;font-size:.875rem}.post .gray{display:block;color:#ccc;font-style:italic}.post .note{background:#f4f4f4;color:#999;padding:1em}.post .note:before{content:"Note: ";font-weight:700}.post .post-footer{margin:3em 0;font-size:.9em}.post .post-footer:after{content:"";display:table;clear:both}.post .post-footer .tweet{float:right}.post .post-footer .back{float:left}.post .post-footer .back:before{content:"\2190";margin-right:7px}</style><link rel=alternate type=application/rss+xml title="Aleksandar Goševski" href=http://www.goschevski.com/feed.xml></head><body itemscope itemtype=http://schema.org/WebPage><div class=header><header class=wrapper role=banner itemscope itemtype=http://schema.org/WPHeader><h1 class=logo itemprop=headline><a href=http://www.goschevski.com>Aleksandar Goševski</a></h1><p class=description itemprop=description>Front-End Developer based in Belgrade, Serbia.</p><nav itemscope itemtype=http://schema.org/SiteNavigationElement><h2 class=title>Navigation</h2><ul><li><a href=https://twitter.com/goschevski itemprop=url>Twitter</a></li><li><a href=https://github.com/goschevski itemprop=url>Github</a></li><li><a href="/resume/" itemprop=url>Resume</a></li><li><a href=/feed.xml itemprop=url>RSS</a></li></ul></nav></header></div><main class=content role=main><div class=wrapper><article class=post itemscope itemtype=http://schema.org/BlogPosting><h1 class=post-title itemprop="name headline">Better Collection Iteration in Backbone.js</h1><time datetime=2014-02-03 itemprop=datePublished>February 2014</time><div class=post-content itemprop=articleBody><p>This is a trivial problem, but I’ve seen this in many beginner tutorials, and I don’t like it. People are iterating over collection and creating Item views in the same function.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>CollectionView</span> <span class=o>=</span> <span class=nx>Backbone</span><span class=p>.</span><span class=nx>View</span><span class=p>.</span><span class=nx>extend</span><span class=p>({</span>
    <span class=nx>tagName</span><span class=o>:</span> <span class=s1>&#39;ul&#39;</span><span class=p>,</span>
    <span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;list&#39;</span><span class=p>,</span>

    <span class=nx>render</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>each</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>this</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span> <span class=k>new</span> <span class=nx>ItemView</span><span class=p>({</span> <span class=nx>model</span><span class=o>:</span> <span class=nx>item</span><span class=p>}).</span><span class=nx>render</span><span class=p>().</span><span class=nx>el</span> <span class=p>);</span>
        <span class=p>},</span> <span class=k>this</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>});</span></code></pre></div><p>I consider this bad, because you can’t reuse adding ItemView code.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>CollectionView</span> <span class=o>=</span> <span class=nx>Backbone</span><span class=p>.</span><span class=nx>View</span><span class=p>.</span><span class=nx>extend</span><span class=p>({</span>
    <span class=nx>tagName</span><span class=o>:</span> <span class=s1>&#39;ul&#39;</span><span class=p>,</span>
    <span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;list&#39;</span><span class=p>,</span>

    <span class=nx>initialize</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>listenTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>collection</span><span class=p>,</span> <span class=s1>&#39;add&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>addOne</span><span class=p>);</span>
    <span class=p>},</span>

    <span class=nx>render</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>each</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>this</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span> <span class=k>new</span> <span class=nx>ItemView</span><span class=p>({</span> <span class=nx>model</span><span class=o>:</span> <span class=nx>item</span><span class=p>}).</span><span class=nx>render</span><span class=p>().</span><span class=nx>el</span> <span class=p>);</span>
        <span class=p>},</span> <span class=k>this</span><span class=p>);</span>
    <span class=p>},</span>

    <span class=nx>addOne</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span>  <span class=k>new</span> <span class=nx>ItemView</span><span class=p>({</span> <span class=nx>model</span><span class=o>:</span> <span class=nx>item</span> <span class=p>}).</span><span class=nx>render</span><span class=p>().</span><span class=nx>el</span> <span class=p>);</span>
    <span class=p>}</span>
<span class=p>});</span></code></pre></div><p>As you see, we need to duplicate code. A better solution is to use a different method.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>CollectionView</span> <span class=o>=</span> <span class=nx>Backbone</span><span class=p>.</span><span class=nx>View</span><span class=p>.</span><span class=nx>extend</span><span class=p>({</span>
    <span class=nx>tagName</span><span class=o>:</span> <span class=s1>&#39;ul&#39;</span><span class=p>,</span>
    <span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;list&#39;</span><span class=p>,</span>

    <span class=nx>initialize</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>listenTo</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>collection</span><span class=p>,</span> <span class=s1>&#39;add&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>addOne</span><span class=p>);</span>
    <span class=p>},</span>

    <span class=nx>render</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>collection</span><span class=p>.</span><span class=nx>each</span><span class=p>(</span> <span class=k>this</span><span class=p>.</span><span class=nx>addOne</span><span class=p>,</span> <span class=k>this</span><span class=p>);</span>
    <span class=p>},</span>

    <span class=nx>addOne</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span> <span class=k>new</span> <span class=nx>ItemView</span><span class=p>({</span> <span class=nx>model</span><span class=o>:</span> <span class=nx>item</span> <span class=p>}).</span><span class=nx>render</span><span class=p>().</span><span class=nx>el</span> <span class=p>);</span>
    <span class=p>}</span>
<span class=p>});</span></code></pre></div><p>In this way, we are more flexible and we haven’t duplicated code.</p></div><footer class=post-footer><a href="/" class=back>All posts</a> <a href="http://www.twitter.com/share?text=Better Collection Iteration in Backbone.js&via=goschevski&url=http://www.goschevski.com/better-collection-iteration-in-backbone-js/" target=_blank class=tweet>Share on Twitter</a></footer></article></div></main></body></html>