<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><title>Aleksandar Goševski | Better Collection Iteration in Backbone.js</title><meta name=description content="It&#39;s a trivial problem, but I&#39;ve seen this in beginner tutorials, and I don&#39;t like it. People are iterating over collections and creating Item views in the same function."><link rel=stylesheet href=/style.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel=stylesheet></head><body><header class=Header role=banner itemscope itemtype=http://schema.org/WPHeader><div class=Header-content><img class=Header-image src=/aleksandar.png alt="Aleksandar Goševski" width=155 height=155><h1 class=Header-title itemprop=headline><a class=Header-link href=https://www.goschevski.com>Aleksandar Goševski</a></h1><p class=Header-description itemprop=description>Software Developer</p><ul class="Social is-centered is-visible-medium"><li class="Social-item is-icon"><a class=Social-github href="https://www.github.com/goschevski/">Github</a></li><li class="Social-item is-icon"><a class=Social-linkedin href="https://www.linkedin.com/in/goschevski/">Linkedin</a></li><li class="Social-item is-icon"><a class=Social-rss href=/rss.xml>RSS</a></li></ul></div><div class=Header-copy>2018 &copy; Aleksandar Goševski</div></header><main class=Main><article class=Post itemscope itemtype=http://schema.org/BlogPosting><h1 class=Post-title itemprop="name headline">Better Collection Iteration in Backbone.js</h1><div class=Post-header><time class=Post-time datetime="Mon Feb 03 2014 01:00:00 GMT+0100 (CET)" itemprop=datePublished>February 2014</time><ul class=Post-tags><li class=Post-tag><a href=/tags/javascript>javascript</a></li><li class=Post-tag><a href=/tags/backbone.js>backbone.js</a></li></ul></div><div class=Post-content itemprop=articleBody><p>It's a trivial problem, but I've seen this in beginner tutorials, and I don't like it. People are iterating over collections and creating Item views in the same function.</p><pre class=lang-highlight><code class="lang-javascript hljs"><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    <span class=hljs-attr>tagName</span>: <span class=hljs-string>'ul'</span>,
    <span class=hljs-attr>className</span>: <span class=hljs-string>'list'</span>,

    <span class=hljs-attr>render</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
            <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ <span class=hljs-attr>model</span>: item}).render().el);
        }, <span class=hljs-keyword>this</span>);
    }
});
</code></pre><p>I consider this wrong because you can't reuse adding ItemView code.</p><pre class=lang-highlight><code class="lang-javascript hljs"><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    <span class=hljs-attr>tagName</span>: <span class=hljs-string>'ul'</span>,
    <span class=hljs-attr>className</span>: <span class=hljs-string>'list'</span>,

    <span class=hljs-attr>initialize</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.listenTo(<span class=hljs-keyword>this</span>.collection, <span class=hljs-string>'add'</span>, <span class=hljs-keyword>this</span>.addOne);
    },

    <span class=hljs-attr>render</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
            <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ <span class=hljs-attr>model</span>: item}).render().el);
        }, <span class=hljs-keyword>this</span>);
    },

    <span class=hljs-attr>addOne</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
        <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ <span class=hljs-attr>model</span>: item }).render().el);
    }
});
</code></pre><p>As you see, we need to duplicate code. A better solution is to use a different method.</p><pre class=lang-highlight><code class="lang-javascript hljs"><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    <span class=hljs-attr>tagName</span>: <span class=hljs-string>'ul'</span>,
    <span class=hljs-attr>className</span>: <span class=hljs-string>'list'</span>,

    <span class=hljs-attr>initialize</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.listenTo(<span class=hljs-keyword>this</span>.collection, <span class=hljs-string>'add'</span>, <span class=hljs-keyword>this</span>.addOne);
    },

    <span class=hljs-attr>render</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-keyword>this</span>.addOne, <span class=hljs-keyword>this</span>);
    },

    <span class=hljs-attr>addOne</span>: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
        <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ <span class=hljs-attr>model</span>: item }).render().el);
    }
});
</code></pre><p>In this way, we are more flexible, and we haven't duplicated code.</p></div></article></main></body></html>