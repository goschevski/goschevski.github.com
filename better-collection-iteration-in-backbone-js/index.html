<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><title>Aleksandar Goševski | Better Collection Iteration in Backbone.js</title><meta name=description content="This is a trivial problem, but I&#39;ve seen this in many beginner tutorials, and I don&#39;t like it. People are iterating over collection and creating Item views in the same function."><link rel=stylesheet href=/style.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Arvo:400,600" media=none onload="if(media!='all')media='all'"></head><body><header class=Header role=banner itemscope itemtype=http://schema.org/WPHeader><div class=Header-content><h1 class=Header-title itemprop=headline><a href=https://www.goschevski.com>Aleksandar Goševski</a></h1><p class=Header-description itemprop=description>Front-End Developer based in Belgrade, Serbia.</p><div class=Line></div></div></header><div class=Container><main class=Main><article class=Post itemscope itemtype=http://schema.org/BlogPosting><h1 class=Post-title itemprop="name headline">Better Collection Iteration in Backbone.js</h1><time class=Post-time datetime="Mon Feb 03 2014 01:00:00 GMT+0100 (CET)" itemprop=datePublished>February 2014</time><ul class=Post-tags><li class=Post-tag><a href=/tags/javascript>javascript</a></li><li class=Post-tag><a href=/tags/backbone.js>backbone.js</a></li></ul><div class=Post-content itemprop=articleBody><p>This is a trivial problem, but I've seen this in many beginner tutorials, and I don't like it. People are iterating over collection and creating Item views in the same function.</p><pre><code class=lang-javascript><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    tagName: <span class=hljs-string>'ul'</span>,
    className: <span class=hljs-string>'list'</span>,

    render: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
            <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ model: item}).render().el);
        }, <span class=hljs-keyword>this</span>);
    }
});
</code></pre><p>I consider this bad, because you can't reuse adding ItemView code.</p><pre><code class=lang-javascript><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    tagName: <span class=hljs-string>'ul'</span>,
    className: <span class=hljs-string>'list'</span>,

    initialize: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.listenTo(<span class=hljs-keyword>this</span>.collection, <span class=hljs-string>'add'</span>, <span class=hljs-keyword>this</span>.addOne);
    },

    render: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
            <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ model: item}).render().el);
        }, <span class=hljs-keyword>this</span>);
    },

    addOne: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
        <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ model: item }).render().el);
    }
});
</code></pre><p>As you see, we need to duplicate code. A better solution is to use a different method.</p><pre><code class=lang-javascript><span class=hljs-keyword>var</span> CollectionView = Backbone.View.extend({
    tagName: <span class=hljs-string>'ul'</span>,
    className: <span class=hljs-string>'list'</span>,

    initialize: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.listenTo(<span class=hljs-keyword>this</span>.collection, <span class=hljs-string>'add'</span>, <span class=hljs-keyword>this</span>.addOne);
    },

    render: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
        <span class=hljs-keyword>this</span>.collection.each(<span class=hljs-keyword>this</span>.addOne, <span class=hljs-keyword>this</span>);
    },

    addOne: <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>item</span>) </span>{
        <span class=hljs-keyword>this</span>.$el.append(<span class=hljs-keyword>new</span> ItemView({ model: item }).render().el);
    }
});
</code></pre><p>In this way, we are more flexible and we haven't duplicated code.</p></div></article></main><div class=Line></div><footer class=Footer><p class=Footer-copyright>Aleksandar Goševski &copy; 2017</p><nav itemscope itemtype=http://schema.org/SiteNavigationElement><h2 class=u-screenReaders>Navigation</h2><ul class=Footer-navigation><li class=Footer-navigationItem><a href=https://github.com/goschevski itemprop=url>Github</a></li><li class=Footer-navigationItem><a href=/rss.xml itemprop=url>RSS</a></li></ul></nav></footer></div></body></html>